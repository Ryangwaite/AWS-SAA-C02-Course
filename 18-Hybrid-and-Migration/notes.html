<h2>Hybrid Enviroment and Migration</h2>
<h3>AWS Site-to-Site VPN</h3>
<p>A logical connection between a VPC and on-premise network encrypted
using IPSec, running over the public internet.</p>
<p>This can be full High Availability if you design it correctly</p>
<p>Quick to provision, less than an hour.</p>
<p>VPNs connect VPCs and on-prem</p>
<p>Virtual Private Gateway (VGW) is the target on one or more route tables</p>
<p>Customer Gateway (CGW)</p>
<ul>
<li>logical configuration on AWS</li>
<li>also the thing that configuration mentions</li>
</ul>
<p>VPN connection itself stores the config and connects the VGW and CGW</p>
<h4>Considerations</h4>
<p>Speed Cap on VPN 1.25Gbps</p>
<p>Latency Considerations - this is inconsistent because it uses the public
internet.</p>
<p>Cost - AWS hourly, GB out cost, data cap</p>
<p>Setup of hours or less</p>
<p>Great as a backup especially for Direct Connect (DX)</p>
<h3>AWS Direct Connect (DX)</h3>
<p>This is a 1 Gpbs or 10 Gbps Network Port into AWS</p>
<p>This is at a DX Location (1000-Base-LX or 10GBASE-LR)</p>
<p>This is a cross connect to your customer router (requires VLANS/BGP)</p>
<p>You can connect to a partner router if extending to your location.</p>
<p>The port needs to be arranged to connect somewhere else and connect to
your hardware.</p>
<p>This is a single fiber optic cable from the DX port to your network.</p>
<p>VIFS are multiple virtual interfaces (VIFS) over one DX</p>
<ul>
<li>Private VIF (VPC)</li>
<li>Public VIF (Public Zone Services)</li>
</ul>
<p>Has one physical cable with no high availability and no encryption.</p>
<p>Can take weeks or month for physica cable to be installed.</p>
<p><strong>Public VIF</strong> is only public services, not public internet.</p>
<p><strong>Private VIF</strong> is one VPC</p>
<p>DX Port Provisioning is likely quick, the cross-connect takes longer.</p>
<p>Generally use a VPN first then bring a DX in and leave VPN as backup.</p>
<p>40 Gbps with aggregation</p>
<p>It does not use public internet and provides consistently low latency.</p>
<p>DX provides NO ENCRYPTION and needs to be managed on a per application basis.</p>
<h3>AWS Transit Gateway (TGW)</h3>
<p>Network transit hub to connect VPCs to on premises networks</p>
<p>Significantly reduces network complexity.</p>
<p>There is a single network object which makes it HA and scalable.</p>
<p>Attachment to other network types.</p>
<p>VPC attachments are configured with a subnet in each AZ where service
is required.</p>
<p>You can use these for cross-region peering attachment.</p>
<p>Can share between accounts using AWS RAM</p>
<h3>Storage Gateway</h3>
<p>Hybrid Storage Virtual Application (On-premise)</p>
<p>Scenarios</p>
<p>Extend storange of File and Volume Storage into AWS.
Keep volume storage backups into AWS.
Tape backups into AWS. Can act as emulation layer.</p>
<p>Migration of extisting infrastructure into AWS slowly.</p>
<ul>
<li>
<p>Tape Gateway (VTL) Mode</p>
<ul>
<li>Virtual Tapes are stored on S3</li>
</ul>
</li>
<li>
<p>File Mode : SMB and NFS</p>
<ul>
<li>File Storage Backed by S3 Objects</li>
</ul>
</li>
<li>
<p>Volume Mode (Gateway Stored)</p>
<ul>
<li>Block Storage backed by S3 and EBS</li>
<li>Great for disaster recovery</li>
<li>Data is kept locally</li>
<li>Awesome for migrations</li>
</ul>
</li>
<li>
<p>Volume Mode (Cache Mode)</p>
<ul>
<li>Data as added to gateway is not stored locally.</li>
<li>Backup to EBS Snapshots</li>
<li>Primarily stored on AWS</li>
<li>Great for limited local storage capacity.</li>
</ul>
</li>
</ul>
<h3>Snowball / Edge / Snowmobile</h3>
<p>Move large amounts of data IN and OUT of AWS</p>
<p>Physical storage the size of a suitcase or truck.</p>
<p>Ordered from AWS, use, then return.</p>
<h4>Snowball</h4>
<p>Anything on Snowball uses KMS
50TB or 80TB Capacity
1 Gbps or 10 Gbps
This makes sense from 10 TB to 10 TB and over many premises.
This only includes storage</p>
<h4>Snowball Edge</h4>
<p>Both storage and compute
Larger capacity vs snowball
10 Gbps or up to 100 Gbps</p>
<p>Storage optimized (with EC2) includes 1TB SSD
Compute optimized
Compute with GPU as above with GPU</p>
<p>These are great for remote sites when ingestion is needed</p>
<h4>Snowmobile</h4>
<p>Portable data center within a shipping container on a truck.</p>
<p>This is a special order and is not available in high volume.
Ideal for single location where 10 PB+ is required.</p>
<p>Up to 100 PB per snowmobile.</p>
<p>This is not economical for multi-site for sub 10 PB</p>
<h3>AWS Directory Service</h3>
<p>This is a managed service with lots of use cases.</p>
<p>Stores objects, users, groups, computers, servers, file Shares with
a structure.</p>
<p>Multiple trees can be grouped into a forest.</p>
<p>Commonly used in Windows Environments.</p>
<p>Sign in to multiple devices with the same username/password provides
central management for assets.</p>
<h4>AWS managed implementation</h4>
<p>Runs within a VPC as a private service.</p>
<p>Provides HA by deploying into multiple AZs.</p>
<p>Certain services in AWS need a directory, Amazon Workspaces.</p>
<p>To join EC2 instances to a domain you need a directory.</p>
<p>Can be isolated or integrated with existing on-prem system.</p>
<p>Could act as a proxy back to on-premises.</p>
<h4>Picking the Modes</h4>
<p>Simple AD should be default</p>
<p>Microsoft AD is anything with Windows or if it needs a trust relationship
with on-prem. This is not an emulation.</p>
<p>AD Connector - Use AWS services without storing any directory info in the
cloud, it proxies to your on-prem directory.</p>
<h3>AWS DataSync</h3>
<p>Data transfer service TO and FROM AWS.</p>
<p>This is used for migrations or for large amounts of data processing transfers.</p>
<p>Designed to work at huge scales. Each agent can handle 10 GB and each job
can handle 50 million files.</p>
<p>This keeps metadata.</p>
<p>Has built in data validation to ensure the data matches.</p>
<p>Each agent is about 100 TB per day.</p>
<p>Can use bandwidth limiters to avoid customer impact</p>
<p>Has incrememetal and scheduled transfer options</p>
<p>Compression and encryption is also supported</p>
<p>It does data validation and automatic recovery from transit errors.</p>
<p>AWS service integration with S3, EFS, FSx for Windows servers.</p>
<p>Pay as you use product.</p>
<p>The data is encrypted in transit and all of the data transfer in parts.</p>
<h4>Components</h4>
<p>Task is a job within datasync and defines what is going from where to where</p>
<p>Agent is software to read and write to on prem such as NFS or SMB</p>
<p>Location is the FROM and TO</p>
<h3>FSx for Windows File Server</h3>
<p>Fully managed native windows file servers/shares
Designed for integration with windows environments</p>
<p>Integrates with Directory Service or Self-Managed AD</p>
<p>Single or Multi-AZ within a VPC.</p>
<p>Can perform on-demand and scheduled backups.</p>
<p>File systems can be access using VPC, Peering, VPN, Direct Connect. Native
windows filesystem or Directory Services.</p>
<h4>Words to look for</h4>
<p>VSS - User Driven Restores
Native file system accesible over SMB</p>
<p>Windows permissions model</p>
<p>Product supports DFS, scale out file share.</p>
<p>Managed - no file server admin</p>
<p>Integrates with DS and your own directory.</p>
